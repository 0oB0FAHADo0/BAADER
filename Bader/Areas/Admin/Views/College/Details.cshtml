@model IEnumerable<CollegeViewModel>

    @{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    }



    @section Scripts{

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get the search input and table elements
            const searchInput = document.querySelector('.table__quick_search');
            const tableRows = document.querySelectorAll('tbody tr');

            // Add event listener to the search input
            searchInput.addEventListener('input', function () {
                const searchTerm = searchInput.value.toLowerCase();

                // Loop through each table row
                tableRows.forEach(row => {
                    // Get all the text content of the row
                    const rowText = row.innerText.toLowerCase();

                    // If the search term is found in the row's text, show the row; otherwise, hide it
                    if (rowText.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
    </script>
            <script>
                @{
            if (@ViewData["Successful"] != null)
                {

                    <Text>
                    var result = '@Html.Raw(ViewData["Successful"])';
                    
                    Swal.fire({
                        title: "تمت العملية",
                        text: result,
                        icon: "success",
                    confirmButtonText: "تم"
                    });

                    </Text>
                }
                  else if (@ViewData["Falied"] != null)
                {
                            <Text>
                            var result = '@Html.Raw(ViewData["Falied"])';
                               
                    Swal.fire({
                        icon: "error",
                        title: "فشلت العملية",
                        text: result,
                      confirmButtonText: "تم"
                      
                    });
                            </Text>
                }
            }
        </script>


        <script>
            function DisplayAlert(event,element) {
            event.preventDefault(); 

         //   const url = element.getAttribute('href');
            const form = element.closest('form')
            Swal.fire({
                title: "هل تريد حذف الكلية من السجل؟",
                text: "هل انت متأكد!؟",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "نعم امسحها",
                cancelButtonText: "الغاء"
            }).then((result) => {
                if (result.isConfirmed) {
                   // window.location.href = url;
                    form.submit();
                }
            });
           
            }
        </script>


    }
<div class="block mb-4">
    <div class="block-header border-bottom px-4 py-3">
        <h5 class="m-0">الكليات</h5>
        <div class="d-flex gap-2">
            <div class="form-group">
                <input type="text" class="form-control table__quick_search"
                       placeholder="البحث السريع ...">
            </div>
            
            
                إضافة كلية جديدة
            </a>
                إضافة كلية جديدة
            </a>
                إضافة كلية جديدة
            </a>
        </div>
    </div>
    <div class="block-body">
        <table class="table table-hover js-dataTable">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(n => n.CollegeNameAr )
                    </th>
                   @*  <th>
                        @Html.DisplayNameFor(n => n.CollegeNameEn)

                    </th> *@
                    <th>
                        @Html.DisplayNameFor(n => n.CollegeCode)

                    </th>
                 
             
                    <th class=""></th>
                </tr>
            </thead>
            <tbody>
                @foreach(var item in Model){
                <tr class="cursor-pointer" >
                    
            
                <td>
                    @item.CollegeNameAr
                </td>
               @*  <td>
                    @item.CollegeNameEn
                </td> *@
                <td>
                    @item.CollegeCode
                </td>
              
           
                

                    <td class="action_td text-end">
                            <form method="post">

                           
                         
                            <a class="btn btn-sm btn-success"  asp-controller="College" asp-action="Edit" asp-route-id="@item.GUID">
                                تعديل
                            </a>

                                <input type="hidden" name="id" value="@item.GUID" />
                            <a class="btn btn-sm btn-danger"  onclick="DisplayAlert(event, this)">حذف</a>



                            </form>
                    </td>

                </tr>
                }
                
            </tbody>
        </table>
    </div>
</div>